<html>
  <head>
    <title>Шпаргалка - STM8 - Управление тактированием</title>
  </head>
  <body>
    <p>
      <a href="../../../../">Шпаргалка</a> - 
      <a href="../../../">Электроника</a> - 
      <a href="../../">Микроконтроллеры</a> - 
      <a href="../">STM8</a>
    </p>
    <hr>
    <h3>STM8 - управление тактированием МК.</h3>
    <p>
      Перед началом работы программы всегда настраиваю тактирование МК. С помощью тактирования можно включать и отключать переферийные устройства МК. Это позволяет уменьшить энергопотребление, т.к. по сути мы отключаем не используемые устройства.
    </p>
    <p>
      Управление тактированием производится с помощью регистров <b>CLK</b>. Смещение в памяти, относительно базового адреса регистров общего назначение (<b>0x5000</b>), для данных регистров равен <b>0x00C0</b>. То есть базовый адрес регистров <b>CLK_</b> равен <b>0x5000 + 0x00C0 = 0x50C0</b>.
    </p>
    <hr>
    <p>
      Первый регистр, это регистр:
    </p>
    <p>
      <b>CLK_ICKR</b> - регистр внутреннего тактирования. По умолчанию включен
      только бит 0. Адрес регистра - <b>0x50C0</b>. Значение по умолчанию -
      <b>0x01</b> Назначение битов:
    </p>
    <p>
      <pre>
        <b>HSIEN</b> [0] - включение/выключение HSI.<br>
        <b>HSIRDY</b>[1] - только для чтения. Статус работы HSI.<br>
        <b>FHWU</b>  [2] - быстрое пробуждение.<br>
        <b>LSIEN</b> [3] - вкл./выкл. LSI.<br>
        <b>LSIRDY</b>[4] - только для чтения. Статус работы LSI.<br>
        <b>REGAH</b> [5] - вкл./выкл. MVR (главного регулятора напряжения) в
        active-halt. Когда бит установлен, MVR выключен. Выход из active-halt
        дольше обычного.
      </pre>
    Биты 6 и 7 зарезервированы. Эти источники не могут быть выключены, если они
      используется как мастер или как источник с пина CCO
    </p>
    <p>
      Данный регистр управляет внутренними тактовыми генераторами. Биты 0 и 3
      включают и выключают высокоскоростной и низкоскоростной внутренние
      генераторы.
    </p>
    <hr>
    <p>
      <b>CLK_ECKR</b> - регистр внешнего тактирования. Адрес регистра -
      <b>0x50C1</b>. Значение по умолчанию - <b>0x00</b>. Назначение битов:
    </p>
    <p>
      <pre>
        <b>HSEEN</b> [0] - включает тактирование от внешнего генератора.
        <b>HSERDY</b>[1] - только чтение. Статус работы HSE.
      </pre>
      Биты 2-7 зарезервированы. Этот источник не может быть выключен, если он
      используется как мастер или как источник с пина CCO
    </p>
    <hr>

  </body>
</html>
